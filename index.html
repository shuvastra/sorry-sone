<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="theme-color" content="#ff9a9e" />
  <title>I'm Sorry ‚Äî Kiran ‚ù§Ô∏è</title>
  <meta name="description" content="A small mobile apology card for Kiran" />
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap');

    :root{
      --bg1: #ff9a9e;
      --bg2: #fecfef;
      --accent: #ff5e78;
      --glass: rgba(255,255,255,0.12);
    }

    /* Reset & base */
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:'Poppins',sans-serif;background:linear-gradient(135deg,var(--bg1),var(--bg2));-webkit-font-smoothing:antialiased}
    body{padding:0;display:flex;align-items:center;justify-content:center;min-height:100vh;overflow-x:hidden}

    /* Full page falling hearts layer (fixed) */
    .bgHearts{position:fixed;inset:0;pointer-events:none;overflow:hidden;z-index:0}
    .bgHearts .heart{position:absolute;left:0;top:-10vh;font-size:18px;opacity:0;will-change:transform,opacity;filter:drop-shadow(0 6px 12px rgba(0,0,0,.12));}

    @keyframes fallFade{
      0% { transform:translateY(-10vh) rotate(0deg) scale(.95); opacity:0 }
      8% { opacity:1 }
      92% { opacity:1 }
      100% { transform:translateY(120vh) rotate(360deg) scale(1.15); opacity:0 }
    }

    /* Mobile-first card */
    .frame{width:100%;padding:18px;display:flex;align-items:center;justify-content:center;z-index:2}
    .card{
      width:100%;
      max-width:420px;
      background: linear-gradient(180deg,var(--glass), rgba(255,255,255,0.06));
      backdrop-filter: blur(8px);
      border-radius:16px;
      padding:16px;
      box-shadow: 0 12px 30px rgba(0,0,0,.16);
      text-align:center;
      position:relative;
      overflow:hidden;
      z-index:2;
    }

    /* Cat emoji (will change per message) */
    .catWrap{display:flex;justify-content:center;margin-bottom:12px;align-items:center;gap:12px}
    .cat{
      display:inline-block;
      font-size:46px;
      line-height:1;
      filter:drop-shadow(0 8px 18px rgba(0,0,0,.18));
      transform-origin:center;
      transition:transform .28s ease, opacity .28s ease;
    }

    h1{font-size:1.2rem;color:#fff;margin:0;font-weight:700}
    .sub{color:#fff;opacity:.95;font-size:.92rem;margin-top:6px;margin-bottom:10px}

    .msgBox{
      background: rgba(255,255,255,0.06);
      border-radius:12px;
      padding:14px;
      min-height:120px;
      color:#fff;
      font-weight:600;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:1rem;
      line-height:1.35;
      transition:transform .28s ease,opacity .28s ease;
      position:relative;
      z-index:3;
      text-align:center;
      padding-left:12px;
      padding-right:12px;
    }

    .controls{display:flex;gap:10px;justify-content:center;margin-top:12px}
    .btn{
      padding:10px 14px;
      border-radius:999px;
      border:none;
      font-weight:700;
      background:#fff;
      color:var(--accent);
      cursor:pointer;
      box-shadow:0 6px 18px rgba(0,0,0,.12);
      font-size:0.98rem;
      z-index:3;
    }
    .btn.secondary{background:transparent;border:2px solid rgba(255,255,255,.12);color:#fff}
    .smallHint{color:#fff;opacity:.9;font-size:.86rem;margin-top:10px}

    /* Desktop: hide mobile-only card and show hint */
    @media(min-width:641px){
      .card{display:none}
      .desktopNotice{display:block;text-align:center;color:#fff;padding:36px}
    }
    .desktopNotice{display:none}

    /* smaller screens tweaks */
    @media(max-width:380px){
      .cat{font-size:40px}
      .msgBox{min-height:110px;font-size:0.97rem}
      h1{font-size:1.05rem}
    }

    /* Respect reduced-motion */
    @media (prefers-reduced-motion: reduce){
      .bgHearts .heart{animation:none !important; transition:none !important}
      .cat{transition:none}
      .msgBox{transition:none}
    }
  </style>
</head>
<body>
  <!-- Full-page falling hearts layer -->
  <div class="bgHearts" id="bgHearts" aria-hidden="true"></div>

  <div class="frame">
    <div class="card" role="region" aria-label="Apology card for Kiran">
      <div class="catWrap">
        <div id="catEmoji" class="cat" aria-hidden="true">üò∫</div>
        <div style="text-align:left">
          <h1> Kiran Sorry ‚ù§Ô∏è</h1>
          <div class="sub">Yeh chhoti si card tumhare liye ‚Äî bas tumhari muskaan wapas chahiye.(tujhe aisa lgta hai ?)</div>
        </div>
      </div>

      <div id="msgBox" class="msgBox" aria-live="polite">Kiran ‚Äî kya main tumse ek baat share karu?</div>

      <div class="controls" role="group" aria-label="Message controls">
        <button id="prev" class="btn secondary" aria-label="Previous message">‚óÄ Prev</button>
        <button id="next" class="btn" aria-label="Next message">Next üíå</button>
      </div>
    </div>
  </div>

  <script>
    /* Hindiglish messages + different cat emojis for each message */
    const messages = [
      { text: "Kiran, mujhe bahut afsos haiü§≠. Tumhara pyara sa smile bohot miss karta hu.(ghanta)", emoji: "üò∫" },
      { text: "Yaad hai tumhara birthday ‚Äî cake sajayaüéÇ, mast hasi aayi? Wohi khushi dubara lana chahta hu.", emoji: "üò∏" },
      { text: "Kalgaaon mandir ka wo din ‚Äî shanti thi, tumhara haath pakad ke chalna bahut khas tha.(ye sahi tha)", emoji: "üòΩ" },
      { text: "Daman ki trip ‚Äî samundar ke kinare chalna aur sunsets dekhna, woh memory mere favourite hai.(jhooth)", emoji: "üòª" },
      { text: "Choti choti baatein ‚Äî late-night chai(kabhi hua hi nahi), masti(sirf ladai), choti ladaaiyan(badi wali) aur phir gale lagnaü§Æ( ‚Äî sab priceless hai.", emoji: "üôÄ" },
      { text: "Main sudharne ka vaada karta hu(lele mera). Please ek mauka do(lauda) ‚Äî nayi yaadein saath banaate hain?(purani bhulna chahta hu bas) ‚ù§Ô∏è", emoji: "üòø" }
    ];

    let index = 0;
    const msgBox = document.getElementById('msgBox');
    const catEmoji = document.getElementById('catEmoji');
    const nextBtn = document.getElementById('next');
    const prevBtn = document.getElementById('prev');
    const bgHearts = document.getElementById('bgHearts');

    function show(i){
      msgBox.style.opacity = 0; msgBox.style.transform = 'translateY(8px)';
      catEmoji.style.transform = 'translateY(-6px) scale(.98)';
      setTimeout(()=>{
        msgBox.textContent = messages[i].text;
        catEmoji.textContent = messages[i].emoji;
        msgBox.style.opacity = 1; msgBox.style.transform = 'translateY(0)';
        catEmoji.style.transform = 'translateY(0) scale(1)';
      }, 200);
    }

    nextBtn.addEventListener('click', ()=>{ index = (index + 1) % messages.length; show(index); });
    prevBtn.addEventListener('click', ()=>{ index = (index - 1 + messages.length) % messages.length; show(index); });

    // swipe support
    let startX = null;
    msgBox.addEventListener('touchstart', e => { startX = e.touches[0].clientX; });
    msgBox.addEventListener('touchend', e => {
      if (startX === null) return;
      const dx = e.changedTouches[0].clientX - startX;
      if (dx < -30) { index = (index + 1) % messages.length; show(index); }
      if (dx > 30) { index = (index - 1 + messages.length) % messages.length; show(index); }
      startX = null;
    });

    // keyboard accessibility
    document.addEventListener('keydown', e=>{
      if (e.key === 'ArrowRight') { index = (index + 1) % messages.length; show(index); }
      if (e.key === 'ArrowLeft') { index = (index - 1 + messages.length) % messages.length; show(index); }
    });

    // --- Full-page falling hearts (more hearts, fade in/out) ---
    function spawnHeart(){
      const h = document.createElement('div');
      h.className = 'heart';
      h.textContent = '‚ù§Ô∏è';

      const size = Math.random()*20 + 12; // 12 - 32px
      const left = Math.random()*100; // vw
      const duration = Math.random()*3 + 5; // 5 - 8s
      const delay = Math.random()*1.5; // 0 - 1.5s
      const rotate = Math.random()*80 - 40;

      h.style.left = left + 'vw';
      h.style.fontSize = size + 'px';
      h.style.transform = `translateY(-10vh) rotate(${rotate}deg)`;
      h.style.opacity = '0';

      // Apply the fallFade animation with randomized duration+delay
      h.style.animation = `fallFade ${duration}s linear ${delay}s forwards`;

      bgHearts.appendChild(h);

      // Remove after animation ends
      setTimeout(()=>{ if(h && h.parentNode) h.parentNode.removeChild(h); }, (duration + delay)*1000 + 300);
    }

    // spawn multiple hearts sometimes for denser effect
    function spawnBatch(){
      const count = Math.random() < 0.3 ? 2 + Math.floor(Math.random()*3) : 1; // sometimes 2-4
      for(let i=0;i<count;i++) setTimeout(spawnHeart, i*120);
    }

    const spawnInterval = 650; // slightly faster
    let heartSpawner = setInterval(spawnBatch, spawnInterval);

    document.addEventListener('visibilitychange', ()=>{
      if(document.hidden){ clearInterval(heartSpawner); heartSpawner = null; }
      else if(!heartSpawner){ heartSpawner = setInterval(spawnBatch, spawnInterval); }
    });

    // init
    show(0);

    // honor reduced-motion preference
    const mediaReduce = window.matchMedia('(prefers-reduced-motion: reduce)');
    if(mediaReduce.matches){ clearInterval(heartSpawner); heartSpawner = null; bgHearts.innerHTML = ''; }
  </script>
</body>
</html>
