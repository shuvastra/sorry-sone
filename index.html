<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="theme-color" content="#ff9a9e" />
  <title>I'm Sorry ‚Äî Kiran ‚ù§Ô∏è</title>
  <meta name="description" content="A small mobile apology card for Kiran" />
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap');

    :root{
      --bg1: #ff9a9e;
      --bg2: #fecfef;
      --accent: #ff5e78;
      --glass: rgba(255,255,255,0.12);
    }

    /* Reset & base */
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:'Poppins',sans-serif;background:linear-gradient(135deg,var(--bg1),var(--bg2));-webkit-font-smoothing:antialiased}
    body{padding:0;display:flex;align-items:center;justify-content:center;min-height:100vh}

    /* Mobile-first card */
    .frame{width:100%;padding:18px;display:flex;align-items:center;justify-content:center}
    .card{
      width:100%;
      max-width:420px;
      background: linear-gradient(180deg,var(--glass), rgba(255,255,255,0.06));
      backdrop-filter: blur(8px);
      border-radius:16px;
      padding:16px;
      box-shadow: 0 12px 30px rgba(0,0,0,.16);
      text-align:center;
      position:relative;
      overflow:hidden;
    }

    /* Cat emoji (will change per message) */
    .catWrap{display:flex;justify-content:center;margin-bottom:12px;align-items:center;gap:12px}
    .cat{
      display:inline-block;
      font-size:46px;
      line-height:1;
      filter:drop-shadow(0 8px 18px rgba(0,0,0,.18));
      transform-origin:center;
      transition:transform .28s ease, opacity .28s ease;
    }

    h1{font-size:1.2rem;color:#fff;margin:0;font-weight:700}
    .sub{color:#fff;opacity:.95;font-size:.92rem;margin-top:6px;margin-bottom:10px}

    .msgBox{
      background: rgba(255,255,255,0.06);
      border-radius:12px;
      padding:14px;
      min-height:120px;
      color:#fff;
      font-weight:600;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:1rem;
      line-height:1.35;
      transition:transform .28s ease,opacity .28s ease;
      position:relative;
      z-index:2;
      text-align:center;
      padding-left:12px;
      padding-right:12px;
    }

    .controls{display:flex;gap:10px;justify-content:center;margin-top:12px}
    .btn{
      padding:10px 14px;
      border-radius:999px;
      border:none;
      font-weight:700;
      background:#fff;
      color:var(--accent);
      cursor:pointer;
      box-shadow:0 6px 18px rgba(0,0,0,.12);
      font-size:0.98rem;
    }
    .btn.secondary{background:transparent;border:2px solid rgba(255,255,255,.12);color:#fff}
    .smallHint{color:#fff;opacity:.9;font-size:.86rem;margin-top:10px}

    /* Falling hearts background container */
    .bgHearts{
      position:absolute;
      inset:0;
      pointer-events:none;
      overflow:hidden;
      z-index:0;
    }

    /* Generic heart element style ‚Äî animation values will be set via inline styles for variety */
    .bgHearts .heart{
      position:absolute;
      top:-6%;
      font-size:16px;
      opacity:0;
      transform: translateY(-10vh) scale(0.9);
      transition: opacity .2s linear;
      will-change:transform,opacity;
      text-shadow: 0 2px 8px rgba(0,0,0,.12);
      filter: drop-shadow(0 6px 12px rgba(0,0,0,.12));
    }

    /* Animation keyframes for falling hearts (translate Y from top to bottom) */
    @keyframes fall {
      0% { transform: translateY(-10vh) rotate(0deg) scale(.9); opacity:0; }
      6% { opacity:1; }
      100% { transform: translateY(120vh) rotate(360deg) scale(1.15); opacity:0; }
    }

    /* Desktop: hide mobile-only card and show hint */
    @media(min-width:641px){
      .card{display:none}
      .desktopNotice{display:block;text-align:center;color:#fff;padding:36px}
    }
    .desktopNotice{display:none}

    /* smaller screens tweaks */
    @media(max-width:380px){
      .cat{font-size:40px}
      .msgBox{min-height:110px;font-size:0.97rem}
      h1{font-size:1.05rem}
    }

    /* Respect reduced-motion */
    @media (prefers-reduced-motion: reduce){
      .bgHearts .heart{animation:none !important; transition:none !important}
      .cat{transition:none}
      .msgBox{transition:none}
    }
  </style>
</head>
<body>
  <div class="frame">
    <div class="card" role="region" aria-label="Apology card for Kiran">
      <div class="catWrap">
        <div id="catEmoji" class="cat" aria-hidden="true">üò∫</div>
        <div style="text-align:left">
          <h1>For Kiran ‚ù§Ô∏è</h1>
          <div class="sub">Yeh chhoti si card tumhare liye ‚Äî bas tumhari muskaan wapas chahiye.</div>
        </div>
      </div>

      <div id="msgBox" class="msgBox" aria-live="polite">Kiran ‚Äî kya main tumse ek baat share karu?</div>

      <div class="controls" role="group" aria-label="Message controls">
        <button id="prev" class="btn secondary" aria-label="Previous message">‚óÄ Prev</button>
        <button id="next" class="btn" aria-label="Next message">Next üíå</button>
      </div>

      <div class="smallHint">Mobile pe hi best experience ‚Äî swipe ya Next dabao</div>

      <div class="bgHearts" id="bgHearts" aria-hidden="true"></div>
    </div>

    <div class="desktopNotice">
      <h2>Open on phone ke liye best hai üíï</h2>
      <p>Yeh page mobile pe khol ke dekho ‚Äî phone pe hi full interactive card milega.</p>
    </div>
  </div>

  <script>
    /* Hindiglish messages + an emoji per message */
    const messages = [
      {
        text: "Kiran, mujhe bahut afsos hai. Tumhara pyara sa smile bohot miss karta hu.",
        emoji: "üòø"
      },
      {
        text: "Yaad hai tumhara birthday ‚Äî cake sajaya, mast hasi aayi? Wohi khushi dubara lana chahta hu.",
        emoji: "üéÇ"
      },
      {
        text: "Kalgaaon mandir ka wo din ‚Äî shanti thi, tumhara haath pakad ke chalna bahut khas tha.",
        emoji: "üôè"
      },
      {
        text: "Daman ki trip ‚Äî samundar ke kinare chalna aur sunsets dekhna, woh memory mere favourite hai.",
        emoji: "üåä"
      },
      {
        text: "Choti choti baatein ‚Äî late-night chai, masti, choti ladaaiyan aur phir gale lagna ‚Äî sab priceless hai.",
        emoji: "‚òïÔ∏è"
      },
      {
        text: "Main sudharne ka vaada karta hu. Please ek mauka do ‚Äî nayi yaadein saath banaate hain? ‚ù§Ô∏è",
        emoji: "üíñ"
      }
    ];

    let index = 0;
    const msgBox = document.getElementById('msgBox');
    const catEmoji = document.getElementById('catEmoji');
    const nextBtn = document.getElementById('next');
    const prevBtn = document.getElementById('prev');
    const bgHearts = document.getElementById('bgHearts');

    function show(i){
      // small fade + translate animation
      msgBox.style.opacity = 0;
      msgBox.style.transform = 'translateY(8px)';
      catEmoji.style.transform = 'translateY(-6px) scale(.98)';
      setTimeout(()=>{
        msgBox.textContent = messages[i].text;
        catEmoji.textContent = messages[i].emoji;
        msgBox.style.opacity = 1;
        msgBox.style.transform = 'translateY(0)';
        catEmoji.style.transform = 'translateY(0) scale(1)';
      }, 200);
    }

    nextBtn.addEventListener('click', ()=>{
      index = (index + 1) % messages.length;
      show(index);
    });

    prevBtn.addEventListener('click', ()=>{
      index = (index - 1 + messages.length) % messages.length;
      show(index);
    });

    // swipe support
    let startX = null;
    msgBox.addEventListener('touchstart', e => { startX = e.touches[0].clientX; });
    msgBox.addEventListener('touchend', e => {
      if (startX === null) return;
      const dx = e.changedTouches[0].clientX - startX;
      if (dx < -30) { index = (index + 1) % messages.length; show(index); }
      if (dx > 30) { index = (index - 1 + messages.length) % messages.length; show(index); }
      startX = null;
    });

    // keyboard accessibility (some phones support keyboards or for dev testing)
    document.addEventListener('keydown', e=>{
      if (e.key === 'ArrowRight') { index = (index + 1) % messages.length; show(index); }
      if (e.key === 'ArrowLeft') { index = (index - 1 + messages.length) % messages.length; show(index); }
    });

    // --- Falling hearts background (CSS animation applied via JS for variety) ---
    // Create hearts with random left, size, duration, delay, and apply CSS 'fall' animation.
    function spawnHeart(){
      const h = document.createElement('div');
      h.className = 'heart';
      h.textContent = '‚ù§Ô∏è';

      // randomize style
      const size = Math.random()*18 + 12; // 12 - 30 px
      const left = Math.random()*100; // vw
      const duration = Math.random()*3 + 5; // 5 - 8s
      const delay = Math.random()*2; // 0 - 2s
      const rotate = Math.random()*80 - 40; // -40 to 40 deg for initial

      h.style.left = left + 'vw';
      h.style.fontSize = size + 'px';
      h.style.transform = `translateY(-10vh) rotate(${rotate}deg)`;
      h.style.opacity = '0';

      // Use the 'fall' animation with inline values so each heart behaves differently
      h.style.animation = `fall ${duration}s linear ${delay}s forwards`;
      // Slight horizontal drift using transform during animation can't be easily varied via keyframes here,
      // but rotate + left randomness gives a natural look.

      bgHearts.appendChild(h);

      // remove after animation finishes (duration + delay)
      setTimeout(()=> {
        if(h && h.parentNode) h.parentNode.removeChild(h);
      }, (duration + delay) * 1000 + 200);
    }

    // Slow spawn rate for subtle effect on mobile
    const spawnInterval = 900; // ms
    let heartSpawner = setInterval(spawnHeart, spawnInterval);

    // Pause spawning if tab hidden -> battery friendly
    document.addEventListener('visibilitychange', ()=>{
      if(document.hidden){ clearInterval(heartSpawner); heartSpawner = null; }
      else if(!heartSpawner){ heartSpawner = setInterval(spawnHeart, spawnInterval); }
    });

    // Initialize content
    show(0);

    // Respect prefers-reduced-motion: if user prefers reduced motion, disable JS spawner & animations
    const mediaReduce = window.matchMedia('(prefers-reduced-motion: reduce)');
    if(mediaReduce.matches){
      // remove existing hearts and stop spawner
      clearInterval(heartSpawner);
      heartSpawner = null;
      bgHearts.innerHTML = '';
      // Ensure no CSS animation is applied by overriding animation property
      const style = document.createElement('style');
      style.innerText = '.bgHearts .heart{animation:none !important;opacity:1 !important}';
      document.head.appendChild(style);
    }
  </script>
</body>
</html>
